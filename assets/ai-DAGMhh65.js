const n=async(o,r,e,a)=>{try{const t=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${o}`,"HTTP-Referer":"https://mazdabuddy.com","X-Title":"MazdaBuddy","Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-exp:free",messages:[{role:"system",content:"You are an expert automotive technician assistant. Provide concise, potential diagnoses and a checklist of 3-5 things to check based on the vehicle and reported issue. Keep it professional and short."},{role:"user",content:`Vehicle: ${r}
Issue: ${e}
Notes: ${a}`}]})});if(!t.ok)throw new Error(`AI API Error: ${t.status}`);return(await t.json()).choices[0]?.message?.content||"No diagnosis generated."}catch(t){throw console.error("AI Service Error:",t),t}},i=async(o,r)=>{try{const e=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${o}`,"HTTP-Referer":"https://mazdabuddy.com","X-Title":"AutoPulse","Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-pro-exp-02-05:free",messages:[{role:"user",content:[{type:"text",text:`Analyze this vehicle image. Extract the following information in JSON format: { "licensePlate": "string", "make": "string", "model": "string", "color": "string" }. If you can't see something, put 'Unknown'. Be very accurate even if the image is blurry.`},{type:"image_url",image_url:{url:r}}]}],response_format:{type:"json_object"}})});if(!e.ok)throw new Error(`AI API Error: ${e.status}`);const t=(await e.json()).choices[0]?.message?.content;return JSON.parse(t)}catch(e){throw console.error("AI Vision Error:",e),e}};export{i as a,n as g};
